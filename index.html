<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Airline Booking Demo</title>
  <style>
    :root{
      --accent:#0b75d1;
      --muted:#666;
      --card-bg:#fff;
      --bg:#f4f7fb;
      --radius:10px;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    body{
      margin:0;
      background:var(--bg);
      color:#222;
      padding:28px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .container{
      max-width:980px;
      margin:0 auto;
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:20px;
      align-items:start;
    }
    header{
      grid-column: 1 / -1;
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:8px;
    }
    header h1{margin:0; font-size:20px;}
    .card{
      background:var(--card-bg);
      padding:18px;
      border-radius:var(--radius);
      box-shadow: 0 6px 18px rgba(13,40,60,0.06);
    }

    /* Search form */
    form .row{
      display:flex;
      gap:10px;
      margin-bottom:10px;
    }
    label{
      font-size:13px;
      color:var(--muted);
      display:block;
      margin-bottom:6px;
    }
    input[type="text"], input[type="date"], select, input[type="number"]{
      width:100%;
      padding:10px 12px;
      border-radius:8px;
      border:1px solid #e0e6ef;
      font-size:14px;
      background:white;
      box-sizing:border-box;
    }
    .half{flex:1}
    .small{width:120px}
    .actions{display:flex; gap:10px; align-items:end; margin-top:6px;}
    button{
      background:var(--accent);
      color:white;
      border:none;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      box-shadow: 0 6px 16px rgba(11,117,209,0.15);
    }
    button.ghost{
      background:transparent;
      color:var(--accent);
      box-shadow:none;
      border:1px solid rgba(11,117,209,0.12);
    }

    /* Results list */
    .results{
      display:flex;
      flex-direction:column;
      gap:12px;
      margin-top:12px;
    }
    .flight{
      display:flex;
      gap:12px;
      padding:12px;
      border-radius:10px;
      border:1px solid #eef3fb;
      align-items:center;
      justify-content:space-between;
    }
    .flight .meta{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .airline{
      width:64px;
      text-align:center;
      font-weight:700;
      color:var(--accent);
    }
    .times{min-width:160px}
    .price{font-size:18px; font-weight:700;}
    .select-btn{padding:8px 12px; border-radius:8px; background:#0aaf6a; color:white; border:none; cursor:pointer}

    /* Right column */
    .sidebar .section{margin-bottom:12px}
    .summary-row{display:flex; justify-content:space-between; margin-bottom:8px}
    .passenger-form input, .passenger-form select{margin-bottom:8px}

    /* Responsive */
    @media (max-width:980px){
      .container{grid-template-columns:1fr; padding:10px}
      .small{width:100%}
    }

    /* tiny helper */
    .muted{color:var(--muted); font-size:13px}
    .center{text-align:center}
    .hidden{display:none}
  </style>
</head>
<body>
  <div class="container">

    <header>
      <h1>SkyQuick — Flight Booking</h1>
      <div class="muted">Demo — client-side only</div>
    </header>

    <!-- Left column: Search + results -->
    <div class="card" id="left">
      <form id="searchForm" onsubmit="event.preventDefault(); searchFlights();">
        <div class="row">
          <div class="half">
            <label for="from">From</label>
            <input id="from" type="text" placeholder="City or Airport (e.g. NYC)" required />
          </div>
          <div class="half">
            <label for="to">To</label>
            <input id="to" type="text" placeholder="City or Airport (e.g. LON)" required />
          </div>
        </div>

        <div class="row">
          <div class="half">
            <label for="depart">Depart</label>
            <input id="depart" type="date" required />
          </div>
          <div class="half">
            <label for="return">Return (optional)</label>
            <input id="return" type="date" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="passengers">Passengers</label>
            <input id="passengers" type="number" min="1" max="9" value="1" required class="small" />
          </div>
          <div>
            <label for="cabin">Class</label>
            <select id="cabin" class="small">
              <option value="economy">Economy</option>
              <option value="premium">Premium Economy</option>
              <option value="business">Business</option>
              <option value="first">First</option>
            </select>
          </div>
          <div style="flex:1"></div>
        </div>

        <div class="actions">
          <button type="submit">Search Flights</button>
          <button type="button" class="ghost" onclick="resetForm()">Reset</button>
        </div>
      </form>

      <div id="resultsSection" class="hidden">
        <h3 style="margin-top:16px">Available Flights</h3>
        <div class="results" id="resultsList" aria-live="polite"></div>
      </div>

      <div id="noResults" class="hidden center muted">No flights found — try different dates or route.</div>
    </div>

    <!-- Right column: Booking summary & passenger details -->
    <aside class="card sidebar" id="right">
      <div class="section">
        <h3>Booking Summary</h3>
        <div class="summary-row"><div class="muted">Route</div><div id="sumRoute">—</div></div>
        <div class="summary-row"><div class="muted">Dates</div><div id="sumDates">—</div></div>
        <div class="summary-row"><div class="muted">Passengers</div><div id="sumPassengers">—</div></div>
        <div class="summary-row"><div class="muted">Cabin</div><div id="sumCabin">—</div></div>
        <div class="summary-row"><div class="muted">Selected flight</div><div id="sumFlight">—</div></div>
        <hr/>
        <div class="summary-row"><strong>Total</strong><strong id="sumPrice">—</strong></div>
      </div>

      <div class="section passenger-form">
        <h4>Passenger Details</h4>
        <label for="pName">Full name</label>
        <input id="pName" type="text" placeholder="e.g. Priya Sharma" />

        <label for="pEmail">Email</label>
        <input id="pEmail" type="text" placeholder="you@example.com" />

        <label for="pPhone">Phone</label>
        <input id="pPhone" type="text" placeholder="+91 98765 43210" />

        <button id="confirmBtn" onclick="confirmBooking()" class="ghost" disabled>Confirm Booking</button>
      </div>

      <div class="section" id="confirmation" class="hidden">
        <h4>Confirmation</h4>
        <div id="confMessage" class="muted">No booking yet.</div>
      </div>
    </aside>

  </div>

  <script>
    // Helpers and UX wiring
    const resultsList = document.getElementById('resultsList');
    const resultsSection = document.getElementById('resultsSection');
    const noResults = document.getElementById('noResults');
    const confirmBtn = document.getElementById('confirmBtn');

    // make sure date inputs can't be in the past
    (function setMinDates(){
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth()+1).padStart(2,'0');
      const dd = String(today.getDate()).padStart(2,'0');
      const min = `${yyyy}-${mm}-${dd}`;
      document.getElementById('depart').setAttribute('min', min);
      document.getElementById('return').setAttribute('min', min);
    })();

    function resetForm(){
      document.getElementById('searchForm').reset();
      document.getElementById('passengers').value = 1;
      resultsList.innerHTML='';
      resultsSection.classList.add('hidden');
      noResults.classList.add('hidden');
      clearSummary();
    }

    function clearSummary(){
      document.getElementById('sumRoute').textContent = '—';
      document.getElementById('sumDates').textContent = '—';
      document.getElementById('sumPassengers').textContent = '—';
      document.getElementById('sumCabin').textContent = '—';
      document.getElementById('sumFlight').textContent = '—';
      document.getElementById('sumPrice').textContent = '—';
      confirmBtn.disabled = true;
      document.getElementById('confMessage').textContent = 'No booking yet.';
    }

    // Search flights (mocked client-side)
    function searchFlights(){
      resultsList.innerHTML = '';
      resultsSection.classList.add('hidden');
      noResults.classList.add('hidden');

      const from = document.getElementById('from').value.trim();
      const to = document.getElementById('to').value.trim();
      const depart = document.getElementById('depart').value;
      const ret = document.getElementById('return').value;
      const passengers = parseInt(document.getElementById('passengers').value || "1", 10);
      const cabin = document.getElementById('cabin').value;

      if(!from || !to || !depart){
        alert('Please fill From, To and Depart date.');
        return;
      }
      // update summary basic info
      document.getElementById('sumRoute').textContent = `${from.toUpperCase()} → ${to.toUpperCase()}`;
      document.getElementById('sumDates').textContent = ret ? `${depart} ↔ ${ret}` : depart;
      document.getElementById('sumPassengers').textContent = passengers;
      document.getElementById('sumCabin').textContent = cabin.charAt(0).toUpperCase() + cabin.slice(1);

      // Generate between 2 and 5 mock flights
      const n = Math.floor(Math.random()*4) + 2;
      const flights = [];
      for(let i=0;i<n;i++){
        flights.push(generateMockFlight(from,to,depart,cabin, i));
      }

      if(flights.length===0){
        noResults.classList.remove('hidden');
        return;
      }

      // Render flights
      flights.forEach((f, idx) => {
        const div = document.createElement('div');
        div.className = 'flight';
        div.innerHTML = `
          <div class="meta">
            <div class="airline">${f.airline}</div>
            <div class="times">
              <div><strong>${f.depTime}</strong> <span class="muted">→ ${f.arrTime}</span></div>
              <div class="muted">${f.duration} • ${f.stops}</div>
            </div>
            <div class="muted">${f.flightNo}</div>
          </div>
          <div style="text-align:right">
            <div class="price">₹ ${f.price.toLocaleString()}</div>
            <div class="muted">per ${document.getElementById('passengers').value} pax</div>
            <div style="margin-top:8px">
              <button class="select-btn" onclick="selectFlight(${idx})">Select</button>
            </div>
          </div>
        `;
        // store object on element for retrieval
        div.dataset.flight = JSON.stringify(f);
        resultsList.appendChild(div);
      });

      resultsSection.classList.remove('hidden');
      // store flights for later selection
      window._mockFlights = flights;
    }

    function generateMockFlight(from,to,depart,cabin,seed=0){
      const airlines = ['SKY', 'AERO', 'NIMBUS', 'ORBIT', 'HORIZON'];
      const airline = airlines[(Math.abs(hashString(from+to+seed)) % airlines.length)];
      const basePrice = 4000 + Math.abs(hashString(from+to+depart+seed)) % 8000;
      const cabinMultiplier = {economy:1, premium:1.5, business:3, first:5}[cabin] || 1;
      const price = Math.round(basePrice * cabinMultiplier / 100) * 100;
      const depHour = 6 + (Math.abs(hashString(seed+from)) % 14);
      const durHours = 2 + (Math.abs(hashString(seed+to)) % 9);
      const dh = String(depHour).padStart(2,'0') + ':00';
      const ah = String((depHour + durHours) % 24).padStart(2,'0') + ':00';
      const stops = (Math.abs(hashString(airline+seed)) % 2) ? 'Non-stop' : '1 stop';
      const flightNo = airline + (100 + (Math.abs(hashString(seed+'')) % 800));
      return {
        airline, flightNo,
        depTime: dh,
        arrTime: ah,
        duration: `${durHours}h`,
        stops,
        price,
        seed
      };
    }

    function hashString(s){
      // simple deterministic-ish hash for mock data
      let h=0;
      for(let i=0;i<s.length;i++){ h = ((h<<5)-h) + s.charCodeAt(i); h |= 0 }
      return h;
    }

    // When user selects a flight
    function selectFlight(idx){
      const flights = window._mockFlights || [];
      if(!flights[idx]) return;
      const f = flights[idx];
      const passengers = parseInt(document.getElementById('passengers').value || "1", 10);
      const total = f.price * passengers;
      document.getElementById('sumFlight').textContent = `${f.airline} ${f.flightNo} • ${f.depTime} → ${f.arrTime}`;
      document.getElementById('sumPrice').textContent = `₹ ${total.toLocaleString()}`;

      // enable passenger form
      confirmBtn.disabled = false;
      // store chosen flight
      window._chosen = {flight:f, total};
      // scroll sidebar into view on narrow screens
      if(window.innerWidth < 980){
        document.getElementById('right').scrollIntoView({behavior:'smooth'});
      }
    }

    // Final confirm booking (client-side demo)
    function confirmBooking(){
      const name = document.getElementById('pName').value.trim();
      const email = document.getElementById('pEmail').value.trim();
      const phone = document.getElementById('pPhone').value.trim();

      if(!window._chosen){
        alert('Please select a flight first.');
        return;
      }
      if(!name || !email){
        alert('Please enter passenger name and email.');
        return;
      }
      // naive email check
      if(!/\S+@\S+\.\S+/.test(email)){
        alert('Please enter a valid email address.');
        return;
      }

      // create booking reference
      const ref = 'SQ' + Math.floor(Math.random()*900000 + 100000);
      const conf = `
        Booking confirmed! 
        Reference: ${ref}
        Passenger: ${name}
        Flight: ${window._chosen.flight.airline} ${window._chosen.flight.flightNo}
        Total: ₹ ${window._chosen.total.toLocaleString()}
      `.trim();

      document.getElementById('confMessage').textContent = conf;
      document.getElementById('confirmation').classList.remove('hidden');
      // disable confirm button to simulate one-time booking
      confirmBtn.disabled = true;

      // Show a friendly alert
      alert('Booking successful! Reference: ' + ref);
    }

    // small usability: update passenger count in summary when changed
    document.getElementById('passengers').addEventListener('change', ()=>{
      document.getElementById('sumPassengers').textContent = document.getElementById('passengers').value;
      // update price if flight already selected
      if(window._chosen){
        const p = parseInt(document.getElementById('passengers').value || "1", 10);
        const total = window._chosen.flight.price * p;
        window._chosen.total = total;
        document.getElementById('sumPrice').textContent = `₹ ${total.toLocaleString()}`;
      }
    });

    // keep summary in sync if user edits route/dates after selecting (basic)
    ['from','to','depart','return','cabin'].forEach(id=>{
      document.getElementById(id).addEventListener('change', ()=>{
        const from = document.getElementById('from').value.trim();
        const to = document.getElementById('to').value.trim();
        const depart = document.getElementById('depart').value;
        const ret = document.getElementById('return').value;
        if(from && to) document.getElementById('sumRoute').textContent = `${from.toUpperCase()} → ${to.toUpperCase()}`;
        if(depart) document.getElementById('sumDates').textContent = ret ? `${depart} ↔ ${ret}` : depart;
        document.getElementById('sumCabin').textContent = document.getElementById('cabin').value;
      });
    });

    // initial clear
    clearSummary();
  </script>
</body>
</html>

